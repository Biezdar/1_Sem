#include <stdio.h>
#include <stdlib.h>

struct lista
{
int wartosc;
struct lista *next;
};

void dodaj_poczatek(struct lista **head, struct lista **tail, int liczba)
{
struct lista *nowy;
nowy=malloc(sizeof(struct lista));
nowy->wartosc=liczba;
if ((*head)==NULL && (*tail)==NULL)
{
*head=nowy;
*tail=nowy;
nowy->next=NULL;
}
else
{
nowy->next=*head;
(*head)=nowy;
}
}    

void dodaj_koniec(struct lista **head, struct lista **tail, int liczba)
{
struct lista *nowy;
nowy=malloc(sizeof(struct lista));
nowy->wartosc=liczba;
if ((*head)==NULL && (*tail)==NULL)
{
*head=nowy;
*tail=nowy;
nowy->next=NULL;
}
else
{
nowy->next=NULL;
(*tail)->next=nowy;
(*tail)=nowy;
}
}

void usun_poczatek(struct lista **head, struct lista **tail)
{
struct lista *nowy;
if((*head)!=NULL)
{
if((*tail)==(*head))
{
*tail=NULL;
free(*head);
*head=NULL;
}
else
{
nowy=(*head)->next;
free(*head);
*head=nowy;
}
}
}

void usun_koniec(struct lista **head, struct lista **tail)
{
struct lista *nowy;
if((*tail)!=NULL)
{
if((*tail)==(*head))
{
*tail=NULL;
free(*head);
*head=NULL;
}
else
{
nowy=*head;         
while(nowy->next->next!=NULL)
{
nowy=nowy->next;
}         
nowy->next=NULL;
free(*tail);
*tail=nowy;
}
}
}

void wypisz_liste(struct lista *wsk)
{
while(wsk!=NULL)
{
printf("%d\n", wsk->wartosc);                
wsk=wsk->next;
}
}

main()
{
int a,b,i;
struct lista *head, *tail;
head=malloc(sizeof(struct lista));
tail=malloc(sizeof(struct lista));
head=NULL;
tail=NULL;

for(i=0;i<3;i++)
{
scanf("%d", &b);
dodaj_poczatek(&head,&tail,b);
}

for(i=0;i<3;i++)
{
scanf("%d", &b);
dodaj_koniec(&head,&tail,b);                 
}

printf("\n");
wypisz_liste(head);

usun_poczatek(&head,&tail);
usun_koniec(&head,&tail);

printf("\n\n");
wypisz_liste(head);

system("PAUSE");
return 0;
}
